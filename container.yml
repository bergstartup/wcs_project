name: compute
version: 1.0.5
kind: ecu # Executable Code Unit
base: python:3.9-slim-buster

entrypoint:
  kind: task
  exec: run.py

description: |
  Exposes utilities for preprocessing data, training a classifier, 
  and generating a valid submission file for the Kaggle challenge
  'Natural Language Processing with Disaster Tweets'.

contributors:
  - Konstantinos
  - Adithya
  - Sudarsan Sivakumar <appsby12@gmail.com>

dependencies:
  - python3
  - python3-yaml

install:
  - apt update && apt upgrade -y
  - apt install pipenv -y

files:
  - run.py 
  - modules/predict/predict.py
  - modules/preprocess/preprocess.py
  - modules/train/train.py
  - modules/visualize/vizualize.py

#unpack:
#  - pipenv install --system --deploy
#  - python3 -c "import nltk; nltk.download('stopwords'); nltk.download('wordnet'); nltk.download('omw-1.4')"

actions:
  'visual':
    command:
      args:
        - visual
    input:
      - name: dataset_path
        type: string
      - name: output_path
        type: string
      - name: cmd
        type: string
    output:
      - type: resultOutput
        name: string

  'train_m':
    command:
      args:
        - train_m
    input:
      - name: dataset_path
        type: string
    output:
      - type: resultOutput
        name: string
    
  'train_t_spl':
    command:
      args:
        - train_t_spl
    input:
      - name: dataset_path
        type: string
    output:
      - type: resultOutput
        name: string

  'prepr':
    command:
      args:
        - prepr
    input:
      - name: dataset_path
        type: string
    output:
      - type: resultOutput
        name: string

  'pred':
    command:
      args:
        - pred
    input:
      - name: dataset_path
        type: string
      - name: output_path
        type: string
    output:
      - type: resultOutput
        name: string
